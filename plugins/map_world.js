nameMap = {
    "新加坡": "Singapore Rep.",
    "多米尼加": "Dominican Rep.",
    "巴勒斯坦": "Palestine",
    "巴哈马": "The Bahamas",
    "东帝汶": "East Timor",
    "阿富汗": "Afghanistan",
    "几内亚比绍": "Guinea Bissau",
    "科特迪瓦": "Côte d'Ivoire",
    "锡亚琴冰川": "Siachen Glacier",
    "英属印度洋领土": "Br. Indian Ocean Ter.",
    "安哥拉": "Angola",
    "阿尔巴尼亚": "Albania",
    "阿联酋": "United Arab Emirates",
    "阿根廷": "Argentina",
    "亚美尼亚": "Armenia",
    "法属南半球和南极领地": "French Southern and Antarctic Lands",
    "澳大利亚": "Australia",
    "奥地利": "Austria",
    "阿塞拜疆": "Azerbaijan",
    "布隆迪": "Burundi",
    "比利时": "Belgium",
    "贝宁": "Benin",
    "布基纳法索": "Burkina Faso",
    "孟加拉国": "Bangladesh",
    "保加利亚": "Bulgaria",
    "波斯尼亚和黑塞哥维那": "Bosnia and Herz.",
    "白俄罗斯": "Belarus",
    "伯利兹": "Belize",
    "百慕大": "Bermuda",
    "玻利维亚": "Bolivia",
    "巴西": "Brazil",
    "文莱": "Brunei",
    "不丹": "Bhutan",
    "博茨瓦纳": "Botswana",
    "中非": "Central African Rep.",
    "加拿大": "Canada",
    "瑞士": "Switzerland",
    "智利": "Chile",
    "中国": "China",
    "象牙海岸": "Ivory Coast",
    "喀麦隆": "Cameroon",
    "刚果民主共和国": "Dem. Rep. Congo",
    "刚果": "Congo",
    "哥伦比亚": "Colombia",
    "哥斯达黎加": "Costa Rica",
    "古巴": "Cuba",
    "北塞浦路斯": "N. Cyprus",
    "塞浦路斯": "Cyprus",
    "捷克": "Czech Rep.",
    "德国": "Germany",
    "吉布提": "Djibouti",
    "丹麦": "Denmark",
    "阿尔及利亚": "Algeria",
    "厄瓜多尔": "Ecuador",
    "埃及": "Egypt",
    "厄立特里亚": "Eritrea",
    "西班牙": "Spain",
    "爱沙尼亚": "Estonia",
    "埃塞俄比亚": "Ethiopia",
    "芬兰": "Finland",
    "斐": "Fiji",
    "福克兰群岛": "Falkland Islands",
    "法国": "France",
    "加蓬": "Gabon",
    "英国": "United Kingdom",
    "格鲁吉亚": "Georgia",
    "加纳": "Ghana",
    "几内亚": "Guinea",
    "冈比亚": "Gambia",
    "赤道几内亚": "Eq. Guinea",
    "希腊": "Greece",
    "格陵兰": "Greenland",
    "危地马拉": "Guatemala",
    "法属圭亚那": "French Guiana",
    "圭亚那": "Guyana",
    "洪都拉斯": "Honduras",
    "克罗地亚": "Croatia",
    "海地": "Haiti",
    "匈牙利": "Hungary",
    "印度尼西亚": "Indonesia",
    "印度": "India",
    "爱尔兰": "Ireland",
    "伊朗": "Iran",
    "伊拉克": "Iraq",
    "冰岛": "Iceland",
    "以色列": "Israel",
    "意大利": "Italy",
    "牙买加": "Jamaica",
    "约旦": "Jordan",
    "日本": "Japan",
    "哈萨克斯坦": "Kazakhstan",
    "肯尼亚": "Kenya",
    "吉尔吉斯斯坦": "Kyrgyzstan",
    "柬埔寨": "Cambodia",
    "韩国": "Korea",
    "科索沃": "Kosovo",
    "科威特": "Kuwait",
    "老挝": "Lao PDR",
    "黎巴嫩": "Lebanon",
    "利比里亚": "Liberia",
    "利比亚": "Libya",
    "斯里兰卡": "Sri Lanka",
    "莱索托": "Lesotho",
    "立陶宛": "Lithuania",
    "卢森堡": "Luxembourg",
    "拉脱维亚": "Latvia",
    "摩洛哥": "Morocco",
    "摩尔多瓦": "Moldova",
    "马达加斯加": "Madagascar",
    "墨西哥": "Mexico",
    "马其顿": "Macedonia",
    "马里": "Mali",
    "缅甸": "Myanmar",
    "黑山": "Montenegro",
    "蒙古": "Mongolia",
    "莫桑比克": "Mozambique",
    "毛里塔尼亚": "Mauritania",
    "马拉维": "Malawi",
    "马来西亚": "Malaysia",
    "纳米比亚": "Namibia",
    "新喀里多尼亚": "New Caledonia",
    "尼日尔": "Niger",
    "尼日利亚": "Nigeria",
    "尼加拉瓜": "Nicaragua",
    "荷兰": "Netherlands",
    "挪威": "Norway",
    "尼泊尔": "Nepal",
    "新西兰": "New Zealand",
    "阿曼": "Oman",
    "巴基斯坦": "Pakistan",
    "巴拿马": "Panama",
    "秘鲁": "Peru",
    "菲律宾": "Philippines",
    "巴布亚新几内亚": "Papua New Guinea",
    "波兰": "Poland",
    "波多黎各": "Puerto Rico",
    "朝鲜": "Dem. Rep. Korea",
    "葡萄牙": "Portugal",
    "巴拉圭": "Paraguay",
    "卡塔尔": "Qatar",
    "罗马尼亚": "Romania",
    "俄罗斯": "Russia",
    "卢旺达": "Rwanda",
    "西撒哈拉": "W. Sahara",
    "沙特阿拉伯": "Saudi Arabia",
    "苏丹": "Sudan",
    "南苏丹": "S. Sudan",
    "塞内加尔": "Senegal",
    "所罗门群岛": "Solomon Is.",
    "塞拉利昂": "Sierra Leone",
    "萨尔瓦多": "El Salvador",
    "索马里兰": "Somaliland",
    "索马里": "Somalia",
    "塞尔维亚": "Serbia",
    "苏里南": "Suriname",
    "斯洛伐克": "Slovakia",
    "斯洛文尼亚": "Slovenia",
    "瑞典": "Sweden",
    "斯威士兰": "Swaziland",
    "叙利亚": "Syria",
    "乍得": "Chad",
    "多哥": "Togo",
    "泰国": "Thailand",
    "塔吉克斯坦": "Tajikistan",
    "土库曼斯坦": "Turkmenistan",
    "特里尼达和多巴哥": "Trinidad and Tobago",
    "突尼斯": "Tunisia",
    "土耳其": "Turkey",
    "坦桑尼亚": "Tanzania",
    "乌干达": "Uganda",
    "乌克兰": "Ukraine",
    "乌拉圭": "Uruguay",
    "美国": "United States",
    "乌兹别克斯坦": "Uzbekistan",
    "委内瑞拉": "Venezuela",
    "越南": "Vietnam",
    "瓦努阿图": "Vanuatu",
    "西岸": "West Bank",
    "也门": "Yemen",
    "南非": "South Africa",
    "赞比亚": "Zambia",
    "津巴布韦": "Zimbabwe"
};
$.get('../json/map/world.json', function (chinaJson) {

    echarts.registerMap('world', chinaJson);

    var mapId = document.getElementById('world_map');

    if (!mapId) {
        return false;
    }
    var myChart = echarts.init(mapId);

    $.get('../json/data/world_map.json', function (data) {
        var hStep = 300 / (data.length - 1);
        var obj = eval(data);
        var busLines = [];
        var time_line_date = [];
        var time_line_option = [];

        for (let i = 0; i < obj.length; i++) {
            var time = obj[i]["time"];
            time_line_date.unshift(time);

            for (let j = 0; j < obj[i]['confirm'].length; j++) {
                const element = obj[i]['confirm'][j];
                element['name'] = nameMap[element['name']]
                obj[i]['confirm'][j] = element

            }
            let o = {
                title: {
                    text: 'Number of confirmed persons in ' + time
                },
                series: [{
                    type: 'map',
                    geoIndex: 0,
                    // coordinateSystem: 'geo',
                    data: obj[i]['confirm'],
                    label: {
                        normal: {
                            show: false
                        }
                    },
                    roam: true,
                }]
            };

            time_line_option.unshift(o);


        }
        // console.log(time_line_option);
        // for (var i = 0; i < obj.length; i++) {
        //     var points = [];
        //     for (var j = 0; j < obj[i].Mnst.length; j++) {
        //         // 这里有一个坑我必须说明一下 我的数据result8.json里经纬度反了，所以这里取值的时候先取的value[1],再取的value[0]
        //         points.push([obj[i].Mnst[j].value[1], obj[i].Mnst[j].value[0]]);
        //     }
        //     busLines.push({
        //         coords: points,
        //         name: obj[i].name,
        //         tooltip: {
        //             trigger: 'item',
        //             formatter: '{b}'
        //         },
        //         lineStyle: {
        //             normal: {
        //                 color: echarts.color.modifyHSL('#5A94DF', Math.round(hStep * i))
        //             }
        //         },
        //     });
        // };


        myChart.setOption({
            baseOption: {
                backgroundColor: '#fff',
                visualMap: {
                    // min: 1,
                    // max: 2000,
                    // splitNumber: 30,
                    show: true,
                    inRange: {
                        color: [

                            "#fef6fe",
                            "#d88273",
                            "#bf444c"

                        ]
                    },
                    textStyle: {
                        color: '#fff'
                    }
                },
                animation: true,
                title: {
                    text: '确诊地图',
                    subtext: 'data from : http://www.nhc.gov.cn/',
                    sublink: '',
                    left: 'center',
                    textStyle: {
                        color: '#aaa'
                    }
                },
                tooltip: {
                    trigger: 'item',
                    formatter: '{b}<br>confirm:{c}'
                },
                timeline: {
                    currentIndex: time_line_date.length - 1,
                    tooltip: {
                        show: false
                    },
                    bottom: '5%',
                    playInterval: 1000,
                    realtime: true,
                    autoPlay: false,
                    emphasis: {
                        controlStyle: {
                            color: "#777"
                        }
                    },
                    checkpointStyle: {
                        // 当前点
                        color: '#aaa',
                        borderColor: '#aaa'
                    },
                    lineStyle: {
                        // 线
                        "color": "#aaa",
                    },
                    textStyle: {
                        color: '#aaa'
                    },
                    itemStyle: {
                        borderColor: "#aaa",
                    },
                    controlStyle: {
                        color: '#aaa',
                        borderColor: "#aaa"
                    },
                    label: {
                        color: "#aaa"
                    },
                    data: time_line_date
                },
                geo: {
                    map: 'world',
                    label: {
                        normal: {
                            show: false,
                            formatter: '{a}',
                            // position: 'inside',
                            //backgroundColor: '#fff',
                            // padding: [3, 5],
                            // borderRadius: 3,
                            // borderWidth: 1,
                            // borderColor: 'rgba(0,0,0,0.5)',
                            color: '#777'
                        },
                        emphasis: {
                            areaColor: '#2a333d'
                        }
                    },
                    selectedMode: 'single',
                    roam: false,
                    itemStyle: {
                        normal: {
                            areaColor: '#ccc',
                            borderColor: '#777'
                        },
                        emphasis: {
                            areaColor: '#2a333d'
                        }
                    },
                    scaleLimit: { //所属组件的z分层，z值小的图形会被z值大的图形覆盖
                        min: 0.6, //最小的缩放值
                        max: 3, //最大的缩放值
                    }

                },
                //    series: series
            },
            options: time_line_option

        });




    }, );
})